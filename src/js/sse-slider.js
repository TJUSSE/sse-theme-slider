// Generated by CoffeeScript 1.9.3
(function() {
  window.g = window.g || {};

  window.g.$sliderScope = {
    self: this,
    settings: {
      IntervalSec: 2
    },
    status: {
      currentShowingIndex: 0,
      totalImageNum: 0,
      LoadedBitmap: 0
    },
    fn: {
      loadImg: function(idx) {
        var loadingImg, url;
        console.log('Slider image #%d now loading...', idx);
        loadingImg = $('.sse-slider img')[idx];
        url = loadingImg.getAttribute('data-src');
        $(loadingImg).attr('src', url);
        return $(loadingImg).removeAttr('data-src');
      },
      onload: function(idx) {
        if (idx !== -1) {
          console.log('Slider image #%d loaded!', idx);
        }
        if (idx !== (window.g.$sliderScope.status.totalImageNum - 1)) {
          return window.g.$sliderScope.fn.loadImg(idx + 1);
        }
      },
      setRoundButtonActivated: function(idx) {
        var btn, j, len, ref, results;
        ref = $('.sse-slider--round-ctrl button');
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          btn = ref[j];
          if ($(btn).hasClass('sse-slider--activated')) {
            $(btn).removeClass('sse-slider--activated');
          }
          if ($(btn).index() === idx) {
            results.push($(btn).addClass('sse-slider--activated'));
          } else {
            results.push(void 0);
          }
        }
        return results;
      },
      changeToSlide: function(idx) {
        var i, img, imgToShow, j, len, ref;
        console.log('Change to #' + idx + '...');
        window.g.$sliderScope.status.currentShowingIndex = idx;
        this.setRoundButtonActivated(idx);
        ref = $('.sse-slider img');
        for (i = j = 0, len = ref.length; j < len; i = ++j) {
          img = ref[i];
          if (($(img).hasClass('is-show')) && (i !== idx)) {
            $(img).removeClass('is-show');
          }
        }
        if ($(imgToShow).attr('data-src')) {
          console.log('Image #' + idx + ' not loaded, now loading...');
          window.g.$sliderScope.fn.loadImg(idx);
        }
        imgToShow = $('.sse-slider img').eq(idx);
        return $(imgToShow).addClass('is-show');
      }
    }
  };

  $(document).ready(function() {
    var btn, i, idx, img, j, k, l, len, len1, li, ref, ref1, ref2, results, roundCtrl;
    $('.sse-slider').append('<div class="sse-slider--indicator"> <div class="spinner"> <div class="spinner-container container1"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container2"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> <div class="spinner-container container3"> <div class="circle1"></div> <div class="circle2"></div> <div class="circle3"></div> <div class="circle4"></div> </div> </div> </div> <div class="sse-slider--control-next"><button><i class="fa fa-angle-right"></i></button></div> <div class="sse-slider--control-prev"><button><i class="fa fa-angle-left"></i></button></div>');
    window.g.$sliderScope.status.totalImageNum = $('.sse-slider img').length;
    roundCtrl = '<div class="sse-slider--round-ctrl">';
    for (i = j = 0, ref = window.g.$sliderScope.status.totalImageNum - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      roundCtrl += '<button><i class="fa fa-circle"></i></button>';
    }
    roundCtrl += '</div>';
    $('.sse-slider').append(roundCtrl);
    console.log('Slides images num: %d', window.g.$sliderScope.status.totalImageNum);
    ref1 = $('.sse-slider li');
    for (k = 0, len = ref1.length; k < len; k++) {
      li = ref1[k];
      idx = $(li).index();
      console.log($(li).index());
      img = $('.sse-slider img').eq(idx);
      $(img).attr('onload', 'window.g.$sliderScope.fn.onload(' + idx + ')');
    }
    window.g.$sliderScope.fn.onload(-1);
    window.g.$sliderScope.fn.changeToSlide(0);
    ref2 = $('.sse-slider--round-ctrl button');
    results = [];
    for (l = 0, len1 = ref2.length; l < len1; l++) {
      btn = ref2[l];
      results.push($(btn).click(function() {
        i = $(this).index();
        return window.g.$sliderScope.fn.changeToSlide(i);
      }));
    }
    return results;
  });

}).call(this);

//# sourceMappingURL=sse-slider.js.map
